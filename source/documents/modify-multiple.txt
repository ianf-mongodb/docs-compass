.. _compass-bulk-update:

=========================
Modify Multiple Documents
=========================

.. facet::
   :name: genre
   :values: tutorial

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can perform bulk update operations on multiple documents in Compass
by using the :guilabel:`Update Documents` modal. Performing updates with
the :guilabel:`Update Documents` modal helps you visualize updates 
to your data before you apply them.

About this Task
---------------

The :guilabel:`Update Documents` bulk update modal is available starting
in Compass version ``1.5.X``. For instructions on updating or installing
the latest Compass version, see :ref:`download-install`. 

Steps
-----

.. procedure::
   :style:  normal

   .. step:: Open the Bulk Update Modal

      From the :guilabel:`Documents` tab, click the :guilabel:`Update`
      button.

      The :guilabel:`Update Documents` modal displays. The following 
      table summarizes the UI of the modal:

      .. list-table::
         :widths: 40 60
         :header-rows: 1

         * - UI Element
           - Description

         * - :guilabel:`Filter`
           - Any filter criteria specified on the 
             :guilabel:`Query Bar` is applied to the 
             :guilabel:`Update Documents` modal.
         * - :guilabel:`Update`
           - The update statement, this is the ``$set`` command syntax. This 
             update applies to the documents and filter criteria specified
             in the modal.
         * - :guilabel:`Preview`
           - A preview of documents after the update statement is applied.

   .. step:: Provide the update syntax 

      a. In the :guilabel:`Update` text field, provide the update 
         syntax.

         .. note::

               The number of documents affected by the update displays in 
               the top of the :guilabel:`Update Documents` modal in 
               parentheses.

      #. Click :guilabel:`Update Documents`.

         Compass applies the :guilabel:`Update` syntax to the documents
         within the filter criteria in the :guilabel:`Filter` expression.

Example
-------

The following examples use the 
:ref:`sample_mflix Atlas dataset <sample-data>`. 

The following example updates the ``tomatoes.viewer.numReviews`` and 
``tomatoes.viewer.meter`` fields with the Compass 
:guilabel:`Update Documents` modal.

Apply a filter in the :guilabel:`Query Bar` to filter movies which
have a ``year`` of ``1917``.

.. code-block:: javascript

   {'year' : 1917}

Click the :guilabel:`Update` button, the :guilabel:`Update Documents` 
modal displays.

In the :guilabel:`Update` text box, paste the following update 
statement:

.. code-block:: javascript

   { 
      $inc: { "tomatoes.viewer.numReviews" : 1}, 
      $set: { "tomatoes.viewer.meter" : 99 } 
   }

This syntax:

- Increments the ``tomatoes.viewer.numReviews`` field by ``1``.
- Sets the ``tomatoes.viewer.meter`` field to ``99``.

The :guilabel:`Preview` section is populated with sample documents
that are affected by the update syntax.

To preview the updates to the :guilabel:`numReviews` 
and :guilabel:`meter` fields, click the 
:icon-fa5:`chevron-right` arrow next to ``tomatoes`` 
and then click the :icon-fa5:`chevron-right` arrow next to 
:guilabel:`rating`.

Click the :guilabel:`Update Documents` button to update the collection 
data.

Learn More
----------

:ref:`compass-bulk-delete`
