.. _compass-import-pipeline:

=========================
Import Pipeline from Text
=========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Starting in Compass 1.35, the import pipeline button has been removed
from the Compass GUI. The full functionality of importing pipelines 
from text is still fully supported as part of the View Pipeline as 
Text edit mode.

You can import aggregation pipelines from plain text into
the :ref:`Aggregation Pipeline Builder <compass-agg-builder>` to
easily modify and execute your pipelines. Importing a plain text
aggregation pipeline shows how each stage of the pipeline
affects the output, and illustrates the effects of modifying specific
pipeline stages using the Pipeline Builder's :guilabel:`Output` panes.

Syntax
------

The imported pipeline must be:

- In the :manual:`MongoDB query language </tutorial/query-documents/>`
(i.e. the same syntax used as the ``pipeline`` parameter of the
:manual:`db.collection.aggregate()
</reference/method/db.collection.aggregate/>` method).
- Must be an array, even if there is only one stage in the pipeline.

Procedure
---------

.. procedure::
   :style: normal

   .. step:: In the aggregation pipeline pane, click the 
      :guilabel:`</> TEXT` toggle switch to enable text mode for 
      pipeline editing.

      .. figure:: /images/compass/agg-builder-textview-toggle-on.png
         :alt: Toggle Textview Mode on

   .. step:: Type or paste aggregation pipeline syntax text into the 
      text editor. The text editor provides real time linting 
      for correct syntax and debugging information.

      .. code-block:: javascript

         [ { "$limit" : 4 } ]

      .. figure:: /images/compass/agg-builder-textview-edit.png
         :alt: Edit aggregation pipeline

Once you import your pipeline, you can click the :guilabel:`{} STAGES` 
switch to return to stage view mode and modify individual stages and 
see the results reflected in the :guilabel:`Output` of each respective 
stage.
